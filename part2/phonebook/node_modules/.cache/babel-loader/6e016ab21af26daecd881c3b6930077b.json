{"ast":null,"code":"import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import _objectSpread from\"/Users/lap13366-local/Documents/self-learning/FullStackOpen2020/part2/phonebook/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/Users/lap13366-local/Documents/self-learning/FullStackOpen2020/part2/phonebook/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from'react';import'./index.css';import personService from'./services/person';import Persons from\"./components/Persons\";import Filter from\"./components/Filter\";import PersonForm from\"./components/PersonForm\";import Notification from\"./components/Notification\";var App=function App(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),persons=_useState2[0],setPersons=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),newName=_useState4[0],setNewName=_useState4[1];var _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),newNumber=_useState6[0],setNewPhone=_useState6[1];var _useState7=useState(''),_useState8=_slicedToArray(_useState7,2),searchName=_useState8[0],setSearchName=_useState8[1];var _useState9=useState({message:null,isSuccess:false}),_useState10=_slicedToArray(_useState9,2),notification=_useState10[0],setNotification=_useState10[1];useEffect(function(){personService.getAll().then(function(persons){return setPersons(persons);});},[]);var addPerson=function addPerson(event){event.preventDefault();var filterPerson=persons.filter(function(person){return person.name===newName;});if(filterPerson.length===0){(function(){var id=persons.length+1;while(persons.filter(function(person){return person.id===id;}).length>0){id=id+1;}var personObject={name:newName,number:newNumber,id:id};personService.create(personObject).then(function(personObject){setPersons(persons.concat(personObject));setNotification({message:\"Added \".concat(newName),isSuccess:true});});setTimeout(function(){return setNotification({message:null,isSuccess:false});},5000);})();}else if(window.confirm(\"\".concat(newName,\" is already added to phonebook, replace a old number with a new one?\"))){var changedPerson=_objectSpread(_objectSpread({},filterPerson[0]),{},{number:newNumber});console.log('changedPerson',changedPerson);personService.update(changedPerson.id,changedPerson).then(function(returnedPerson){setPersons(persons.map(function(person){return person.id!==returnedPerson.id?person:returnedPerson;}));setNotification({message:\"Updated \".concat(newName),isSuccess:true});}).catch(function(error){setNotification({message:\"Information of \".concat(newName,\" has already been removed from server\"),isSuccess:false});setPersons(persons.filter(function(person){return person.name!==newName;}));console.log(error);});setTimeout(function(){return setNotification({message:null,isSuccess:false});},5000);}setNewName('');setNewPhone('');};var deletePerson=function deletePerson(person){console.log(person.name);if(window.confirm(\"Do you really want to delete \".concat(person.name)))personService.remove(person.id).then(function(){return setPersons(persons.filter(function(p){return p.id!=person.id;}));});setNotification({message:\"Removed \".concat(person.name),isSuccess:true});};var handlePersonChange=function handlePersonChange(event){setNewName(event.target.value);};var handlePhoneChange=function handlePhoneChange(event){setNewPhone(event.target.value);};var handleSearchName=function handleSearchName(event){setSearchName(event.target.value);};var searchPersons=searchName===''?persons:persons.filter(function(person){return person.name.toLocaleLowerCase().includes(searchName.toLocaleLowerCase());});return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Notification,{message:notification.message,isSuccess:notification.isSuccess}),/*#__PURE__*/_jsx(\"h2\",{children:\"Search phone number by name (insensitive)\"}),/*#__PURE__*/_jsx(Filter,{searchName:searchName,handleSearchName:handleSearchName}),/*#__PURE__*/_jsx(\"h2\",{children:\"Phonebook\"}),/*#__PURE__*/_jsx(PersonForm,{addPerson:addPerson,newName:newName,newNumber:newNumber,handlePersonChange:handlePersonChange,handlePhoneChange:handlePhoneChange}),/*#__PURE__*/_jsx(\"h2\",{children:\"Numbers\"}),/*#__PURE__*/_jsx(Persons,{searchPersons:searchPersons,deletePerson:deletePerson})]});};export default App;","map":{"version":3,"sources":["/Users/lap13366-local/Documents/self-learning/FullStackOpen2020/part2/phonebook/src/App.js"],"names":["React","useState","useEffect","personService","Persons","Filter","PersonForm","Notification","App","persons","setPersons","newName","setNewName","newNumber","setNewPhone","searchName","setSearchName","message","isSuccess","notification","setNotification","getAll","then","addPerson","event","preventDefault","filterPerson","filter","person","name","length","id","personObject","number","create","concat","setTimeout","window","confirm","changedPerson","console","log","update","returnedPerson","map","catch","error","deletePerson","remove","p","handlePersonChange","target","value","handlePhoneChange","handleSearchName","searchPersons","toLocaleLowerCase","includes"],"mappings":"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","sourcesContent":["import React, { useState, useEffect} from 'react'\nimport './index.css'\nimport personService from './services/person'\nimport Persons from \"./components/Persons\";\nimport Filter from \"./components/Filter\";\nimport PersonForm from \"./components/PersonForm\"\nimport Notification from \"./components/Notification\"\n\nconst App = () => {\n  const [ persons, setPersons ] = useState([])\n  const [ newName, setNewName ] = useState('')\n  const [ newNumber, setNewPhone ] = useState('')\n  const [ searchName, setSearchName ] = useState('')\n  const [notification, setNotification] = useState({message: null, isSuccess: false})\n\n  useEffect(() =>{\n      personService\n          .getAll()\n          .then(persons => setPersons(persons))\n  }, [])\n\n  const addPerson = (event) => {\n      event.preventDefault()\n      const filterPerson = persons.filter(person => person.name === newName)\n      if (filterPerson.length === 0){\n          let id = persons.length + 1\n          while (persons.filter(person => person.id === id).length > 0)\n              id = id + 1\n          const personObject = {\n              name: newName,\n              number: newNumber,\n              id: id\n          }\n          personService\n              .create(personObject)\n              .then(personObject => {\n                  setPersons(persons.concat(personObject))\n                  setNotification({\n                      message: `Added ${newName}`, \n                      isSuccess: true})\n                  }\n              )\n          setTimeout(() => setNotification({\n              message: null,\n              isSuccess: false\n          }), 5000)\n      }\n      else\n          if(window.confirm(`${newName} is already added to phonebook, replace a old number with a new one?`)) {\n              const changedPerson = {...filterPerson[0], number: newNumber}\n              console.log('changedPerson', changedPerson)\n              personService\n                  .update(changedPerson.id, changedPerson)\n                  .then(returnedPerson => {\n                      setPersons(persons.map(person => person.id !== returnedPerson.id ? person : returnedPerson))\n                      setNotification({\n                          message: `Updated ${newName}`,\n                          isSuccess: true\n                      })\n                  })\n                  .catch(error => {\n                      setNotification({\n                          message: `Information of ${newName} has already been removed from server`,\n                          isSuccess: false\n                      })\n                      setPersons(persons.filter(person => person.name !== newName))\n                      console.log(error)\n                  })\n              setTimeout(() => setNotification({\n                  message: null,\n                  isSuccess: false\n              }), 5000)\n          }\n      setNewName('')\n      setNewPhone('')\n    }\n\n  const deletePerson = (person) => {\n        console.log(person.name)\n        if (window.confirm(`Do you really want to delete ${person.name}`))\n            personService\n                .remove(person.id)\n                .then(() => setPersons(persons.filter(p => p.id != person.id)))\n         setNotification({\n             message: `Removed ${person.name}`,\n             isSuccess: true\n\n         })\n\n    }\n\n  const handlePersonChange = (event) => {\n      setNewName(event.target.value)\n  }\n\n  const handlePhoneChange = (event) => {\n      setNewPhone(event.target.value)\n  }\n\n  const handleSearchName = (event) => {\n      setSearchName(event.target.value)\n  }\n\n  const searchPersons = searchName === ''\n      ? persons\n      : persons.filter(person => person.name.toLocaleLowerCase().includes(searchName.toLocaleLowerCase()))\n\n  return (\n    <div>\n      <Notification message={notification.message} isSuccess={notification.isSuccess}/>\n      <h2>Search phone number by name (insensitive)</h2>\n      <Filter searchName={searchName} handleSearchName={handleSearchName}/>\n      <h2>Phonebook</h2>\n      <PersonForm addPerson={addPerson} newName={newName} newNumber={newNumber} handlePersonChange={handlePersonChange} handlePhoneChange={handlePhoneChange}/>\n      <h2>Numbers</h2>\n      <Persons searchPersons={searchPersons} deletePerson={deletePerson}/>\n    </div>\n  )\n}\n\nexport default App"]},"metadata":{},"sourceType":"module"}