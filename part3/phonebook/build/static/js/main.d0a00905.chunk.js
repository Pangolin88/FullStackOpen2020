(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{20:function(e,n,t){},39:function(e,n,t){"use strict";t.r(n);var c=t(0),s=t(1),a=t.n(s),r=t(14),o=t.n(r),u=t(3),i=(t(20),t(4)),l=t.n(i),j="/api/persons",d=function(){return l.a.get(j).then((function(e){return e.data}))},h=function(e){return l.a.post(j,e).then((function(e){return e.data}))},b=function(e){return l.a.delete("".concat(j,"/").concat(e)).then((function(e){return e.data}))},m=function(e){var n=e.searchPersons,t=e.deletePerson;return Object(c.jsx)("div",{children:Object(c.jsx)("ul",{children:n.map((function(e,n){return Object(c.jsxs)("li",{children:[e.name," ",e.number,Object(c.jsx)("button",{onClick:function(){return t(e)},children:"delete"})]},n)}))})})},f=function(e){var n=e.searchName,t=e.handleSearchName;return Object(c.jsx)("form",{children:Object(c.jsxs)("div",{children:["filter name with ",Object(c.jsx)("input",{value:n,onChange:t})]})})},O=function(e){var n=e.addPerson,t=e.newName,s=e.newNumber,a=e.handlePersonChange,r=e.handlePhoneChange;return Object(c.jsxs)("form",{onSubmit:n,children:[Object(c.jsxs)("div",{children:["name: ",Object(c.jsx)("input",{value:t,onChange:a})]}),Object(c.jsxs)("div",{children:["number: ",Object(c.jsx)("input",{value:s,onChange:r})]}),Object(c.jsx)("div",{children:Object(c.jsx)("button",{type:"submit",children:"add"})})]})},x=function(e){var n=e.message,t=e.isSuccess;return null===n?null:t?Object(c.jsx)("div",{className:"success",children:n}):Object(c.jsx)("div",{className:"error",children:n})},v=function(){var e=Object(s.useState)([]),n=Object(u.a)(e,2),t=n[0],a=n[1],r=Object(s.useState)(""),o=Object(u.a)(r,2),i=o[0],l=o[1],j=Object(s.useState)(""),v=Object(u.a)(j,2),g=v[0],p=v[1],S=Object(s.useState)(""),w=Object(u.a)(S,2),N=w[0],P=w[1],C=Object(s.useState)({message:null,isSuccess:!1}),k=Object(u.a)(C,2),y=k[0],L=k[1];Object(s.useEffect)((function(){d().then((function(e){return a(e)}))}),[]);var D=""===N?t:t.filter((function(e){return e.name.toLocaleLowerCase().includes(N.toLocaleLowerCase())}));return Object(c.jsxs)("div",{children:[Object(c.jsx)(x,{message:y.message,isSuccess:y.isSuccess}),Object(c.jsx)("h2",{children:"Search phone number by name (insensitive)"}),Object(c.jsx)(f,{searchName:N,handleSearchName:function(e){P(e.target.value)}}),Object(c.jsx)("h2",{children:"Phonebook"}),Object(c.jsx)(O,{addPerson:function(e){e.preventDefault();var n={name:i,number:g};console.log(n),h(n).then((function(e){a(t.concat(e)),L({message:"Added ".concat(i),isSuccess:!0})})).catch((function(e){console.log(e.response.data),L({message:e.response.data.error,isSuccess:!1})})),setTimeout((function(){return L({message:null,isSuccess:!1})}),2e3),l(""),p("")},newName:i,newNumber:g,handlePersonChange:function(e){l(e.target.value)},handlePhoneChange:function(e){p(e.target.value)}}),Object(c.jsx)("h2",{children:"Numbers"}),Object(c.jsx)(m,{searchPersons:D,deletePerson:function(e){console.log(e.name),window.confirm("Do you really want to delete ".concat(e.name))&&b(e.id).then((function(n){a(t.filter((function(n){return n.id!==e.id}))),L({message:"Removed ".concat(e.name),isSuccess:!0})}))}})]})};o.a.render(Object(c.jsx)(a.a.StrictMode,{children:Object(c.jsx)(v,{})}),document.getElementById("root"))}},[[39,1,2]]]);
//# sourceMappingURL=main.d0a00905.chunk.js.map